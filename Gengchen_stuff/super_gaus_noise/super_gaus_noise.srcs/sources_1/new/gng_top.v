`timescale 1ns / 1ps
//////////////////////////////////////////////////////////////////////////////////
// Company:  UC Davis
// Engineer: Gengchen
// 
// Create Date: 12/21/2017 05:05:01 AM
// Design Name: 
// Module Name: gng_top
// Project Name: 
// Target Devices: 
// Tool Versions: 
// Description: 
// 
// Dependencies: 
// 
// Revision:
// Revision 0.01 - File Created
// Additional Comments:
// 
//////////////////////////////////////////////////////////////////////////////////


module gng_top(
    input wire clk,
    input wire [63:0] unif_in,
    output wire [15:0] awgn_out
    );
    wire [7:0] lzd_input;
    wire [4:0] offset;
    wire [14:0] poly_in;
    wire sgn;
    
    assign sgn = unif_in[0];
    assign lzd_input = unif_in[63:56];
    assign offset = unif_in[5:1];
    assign poly_in = unif_in[20:6];
    
    wire [3:0] zero_pos;
    wire [7:0] index0;
    
    lzd lzd_go(.clk(clk),.lzd_in(lzd_input),.zero_pos(zero_pos)); 
    seg_mem rom0(.clk(clk),.zero_pos(zero_pos),.index(index0));
    
    wire [17:0] coef1; // coef1 * x^2, 3.15 2's format
    wire [17:0] coef2;
    wire [17:0] coef3;
    wire [7:0] index1;
    
    wire [4:0] offset1;
    wire [4:0] offset2;
    //wire [4:0] offset3;
    offset_delay mm0(.clk(clk),.offset_in(offset),.offset_out(offset1));
    offset_delay mm1(.clk(clk),.offset_in(offset1),.offset_out(offset2));
    //offset_delay mm2(.clk(clk),.offset_in(offset2),.offset_out(offset3));
    
    assign index1 = index0 + offset2;
    coef_mem rom1(.clk(clk),.index(index1),.coef({coef1,{coef2,coef3}})); // so far coef latency = 3
    // poly_in should be in 000.0000xxxxxxxxx format, 3.22
    // now poly_in should be in 000.0000000xxxxx format 3 decimal, 2 additional zero, 5 offset
    wire [24:0] poly_in1;
    wire [24:0] poly_data1;
    wire [24:0] poly_data2;
    wire [24:0] poly_square;
    assign poly_in1 = {10'd0,poly_in};
    
    wire [24:0] poly_in2;
    wire [24:0] poly_in3;
    wire [24:0] poly_in4;
    wire [24:0] poly_in5;
    // not the best implementation, multipliers can be reduced to two.
    delay_one_clk dly1(clk,poly_in1,poly_in2); // polyin1 000.0000000xxxxxxxxx 
    delay_one_clk dly2(clk,poly_in2,poly_in5); // so far, poly in latency = 2    
    delay_one_clk dly32(clk,poly_in5,poly_in3); // so far, poly in latency = 2                       
    super_mult mult0(clk,poly_in3,poly_in3,poly_square); //poly_square latency = 3 
    super_mult mult1(clk,poly_square,{{coef1,7'b0000000}},poly_data1);  //poly_data1 latency = 4,
    delay_one_clk dly3(clk,poly_in3,poly_in4); // poly in 4 latency = 3
    super_mult mult2(clk,poly_in4,{{coef2,7'b0000000}},poly_data2); //poly_data2 latency = 4,
    wire [24:0] coef3_dly1;
    delay_one_clk dly4(clk,{{coef3,7'b0000000}},coef3_dly1); //coef3_dly1 latency = 4;   
    wire [24:0] final;
    assign final = poly_data1 + {poly_data2[24],poly_data2[24:1]} + coef3_dly1;   //final is 3.22 
    wire sgn1,sgn2,sgn3,sgn4;
    delay_one_bit dly5(clk,sgn,sgn1);  //sgn latency = 1
    delay_one_bit dly6(clk,sgn1,sgn2); //sgn latency = 2
    delay_one_bit dly7(clk,sgn2,sgn3); //sgn latency = 3
    delay_one_bit dly8(clk,sgn3,sgn4); //sgn latency = 4
    wire [24:0] final1;
    assign final1 = sgn4?(~final + 1'b1):(final);
    assign awgn_out = final1[24:9];
    //assign awgn_out = sgn4?(final[24:9]):(~(final[24:9])+1'b1);
 
endmodule



module delay_one_clk(
    input wire clk,
    input wire [24:0] in,
    output reg [24:0] out
    );
    always @(posedge clk) begin
        out <= in;
    end 
    endmodule
    
    
module lzd(
    input wire clk,
    input wire [7:0] lzd_in,
    output reg [3:0] zero_pos
    );    
    always @(posedge clk) begin
        casez(lzd_in)
            8'b0???????: zero_pos <= 4'd1;
            8'b10??????: zero_pos <= 4'd2;
            8'b110?????: zero_pos <= 4'd3;
            8'b1110????: zero_pos <= 4'd4;
            8'b11110???: zero_pos <= 4'd5;
            8'b111110??: zero_pos <= 4'd6;
            8'b1111110?: zero_pos <= 4'd7;
            8'b11111110: zero_pos <= 4'd8;
            8'b11111111: zero_pos <= 4'd8;
            //8'b1111111110: zero_pos <= 5'd10;
            //8'b1111111111: zero_pos <= 5'd10;
        endcase
    end
endmodule

module seg_mem(
    input wire clk,
    input wire [3:0] zero_pos,
    output reg [7:0] index
    );
    always @(posedge clk) begin
        case(zero_pos)
            4'd1: index <= 8'd0;
            4'd2: index <= 8'd32;
            4'd3: index <= 8'd64;
            4'd4: index <= 8'd96;
            4'd5: index <= 8'd128;
            4'd6: index <= 8'd160;
            4'd7: index <= 8'd192;
            4'd8: index <= 8'd224;
            //4'd9: index <= 6'd32;
            //4'd10: index<= 6'd36;
        endcase
    end
endmodule    

module coef_mem(
    input wire clk,
    input wire [7:0] index,  // 256 entriese, 8 seg * 32 offset
    output reg [53:0] coef
    );
    always @(posedge clk) begin
        case(index)
            8'd0:   coef = 54'b000000000000000000000000010100000011000000000000000000;
            8'd1:   coef = 54'b000000000000000000000000010100000011000000001010000001;
            8'd2:   coef = 54'b000000000000000001000000010100000100000000010100000011;
            8'd3:   coef = 54'b000000000000000001000000010100000101000000011110000110;
            8'd4:   coef = 54'b000000000000000010000000010100000111000000101000001001;
            8'd5:   coef = 54'b000000000000000010000000010100001001000000110010001101;
            8'd6:   coef = 54'b000000000000000011000000010100001100000000111100010011;
            8'd7:   coef = 54'b000000000000000011000000010100001111000001000110011010;
            8'd8:   coef = 54'b000000000000000100000000010100010011000001010000100010;
            8'd9:   coef = 54'b000000000000000100000000010100010111000001011010101101;
            8'd10:   coef = 54'b000000000000000101000000010100011100000001100100111010;
            8'd11:   coef = 54'b000000000000000110000000010100100001000001101111001010;
            8'd12:   coef = 54'b000000000000000110000000010100100111000001111001011100;
            8'd13:   coef = 54'b000000000000000111000000010100101110000010000011110010;
            8'd14:   coef = 54'b000000000000000111000000010100110101000010001110001011;
            8'd15:   coef = 54'b000000000000001000000000010100111101000010011000101000;
            8'd16:   coef = 54'b000000000000001001000000010101000110000010100011001001;
            8'd17:   coef = 54'b000000000000001001000000010101001111000010101101101110;
            8'd18:   coef = 54'b000000000000001010000000010101011001000010111000011000;
            8'd19:   coef = 54'b000000000000001011000000010101100011000011000011001000;
            8'd20:   coef = 54'b000000000000001100000000010101101111000011001101111100;
            8'd21:   coef = 54'b000000000000001101000000010101111011000011011000110111;   
            8'd22:   coef = 54'b000000000000001110000000010110001000000011100011111000;
            8'd23:   coef = 54'b000000000000001111000000010110010111000011101111000000;
            8'd24:   coef = 54'b000000000000010000000000010110100110000011111010010000;
            8'd25:   coef = 54'b000000000000010001000000010110110110000100000101100111;
            8'd26:   coef = 54'b000000000000010010000000010111000111000100010001000110;
            8'd27:   coef = 54'b000000000000010011000000010111011001000100011100101111;
            8'd28:   coef = 54'b000000000000010101000000010111101101000100101000100001;
            8'd29:   coef = 54'b000000000000010110000000011000000010000100110100011101;
            8'd30:   coef = 54'b000000000000011000000000011000011001000101000000100100;
            8'd31:   coef = 54'b000000000000011001000000011000110001000101001100110110;
            8'd32:   coef = 54'b000000000000000110000000001100100101000101011001010101;
            8'd33:   coef = 54'b000000000000000111000000001100101100000101011111101010;
            8'd34:   coef = 54'b000000000000000111000000001100110011000101100110000010;
            8'd35:   coef = 54'b000000000000000111000000001100111010000101101100011101;
            8'd36:   coef = 54'b000000000000000111000000001101000010000101110010111100;
            8'd37:   coef = 54'b000000000000001000000000001101001010000101111001011111;
            8'd38:   coef = 54'b000000000000001000000000001101010010000110000000000111;
            8'd39:   coef = 54'b000000000000001000000000001101011010000110000110110010;
            8'd40:   coef = 54'b000000000000001001000000001101100011000110001101100001;
            8'd41:   coef = 54'b000000000000001001000000001101101100000110010100010101;
            8'd42:   coef = 54'b000000000000001001000000001101110101000110011011001110;
            8'd43:   coef = 54'b000000000000001010000000001101111111000110100010001011;
            8'd44:   coef = 54'b000000000000001010000000001110001001000110101001001110;
            8'd45:   coef = 54'b000000000000001011000000001110010100000110110000010101;
            8'd46:   coef = 54'b000000000000001011000000001110011111000110110111100010;
            8'd47:   coef = 54'b000000000000001011000000001110101011000110111110110101;
            8'd48:   coef = 54'b000000000000001100000000001110110111000111000110001110;
            8'd49:   coef = 54'b000000000000001101000000001111000011000111001101101100;
            8'd50:   coef = 54'b000000000000001101000000001111010000000111010101010001;
            8'd51:   coef = 54'b000000000000001110000000001111011110000111011100111101;
            8'd52:   coef = 54'b000000000000001110000000001111101100000111100100110000;
            8'd53:   coef = 54'b000000000000001111000000001111111011000111101100101010;
            8'd54:   coef = 54'b000000000000010000000000010000001011000111110100101011;
            8'd55:   coef = 54'b000000000000010001000000010000011011000111111100110101;
            8'd56:   coef = 54'b000000000000010010000000010000101100001000000101000111;
            8'd57:   coef = 54'b000000000000010010000000010000111110001000001101100010;
            8'd58:   coef = 54'b000000000000010011000000010001010001001000010110000110;
            8'd59:   coef = 54'b000000000000010101000000010001100101001000011110110011;
            8'd60:   coef = 54'b000000000000010110000000010001111010001000100111101100;
            8'd61:   coef = 54'b000000000000010111000000010010010000001000110000101110;   
            8'd62:   coef = 54'b000000000000011000000000010010101000001000111001111101;
            8'd63:   coef = 54'b000000000000011010000000010011000001001001000011010111;
            8'd64:   coef = 54'b000000000000000110000000001001101101001001001100111110;
            8'd65:   coef = 54'b000000000000000111000000001001110100001001010001110111;
            8'd66:   coef = 54'b000000000000000111000000001001111011001001010110110011;
            8'd67:   coef = 54'b000000000000000111000000001010000011001001011011110011;
            8'd68:   coef = 54'b000000000000000111000000001010001010001001100000110110;
            8'd69:   coef = 54'b000000000000001000000000001010010010001001100101111101;
            8'd70:   coef = 54'b000000000000001000000000001010011010001001101011001001;
            8'd71:   coef = 54'b000000000000001000000000001010100010001001110000011000;
            8'd72:   coef = 54'b000000000000001000000000001010101011001001110101101100;
            8'd73:   coef = 54'b000000000000001001000000001010110100001001111011000011;
            8'd74:   coef = 54'b000000000000001001000000001010111101001010000000100000;
            8'd75:   coef = 54'b000000000000001001000000001011000111001010000110000001;
            8'd76:   coef = 54'b000000000000001010000000001011010001001010001011100111;
            8'd77:   coef = 54'b000000000000001010000000001011011011001010010001010010;
            8'd78:   coef = 54'b000000000000001011000000001011100110001010010111000011;
            8'd79:   coef = 54'b000000000000001011000000001011110001001010011100111001;
            8'd80:   coef = 54'b000000000000001011000000001011111100001010100010110100;
            8'd81:   coef = 54'b000000000000001100000000001100001000001010101000110101;
            8'd82:   coef = 54'b000000000000001101000000001100010101001010101110111101;
            8'd83:   coef = 54'b000000000000001101000000001100100010001010110101001011;
            8'd84:   coef = 54'b000000000000001110000000001100101111001010111011011111;
            8'd85:   coef = 54'b000000000000001110000000001100111101001011000001111011;
            8'd86:   coef = 54'b000000000000001111000000001101001100001011001000011101;
            8'd87:   coef = 54'b000000000000010000000000001101011100001011001111001000;
            8'd88:   coef = 54'b000000000000010001000000001101101100001011010101111010;
            8'd89:   coef = 54'b000000000000010001000000001101111101001011011100110100;
            8'd90:   coef = 54'b000000000000010010000000001110001111001011100011111000;
            8'd91:   coef = 54'b000000000000010011000000001110100010001011101011000100;
            8'd92:   coef = 54'b000000000000010100000000001110110101001011110010011010;
            8'd93:   coef = 54'b000000000000010101000000001111001010001011111001111010;
            8'd94:   coef = 54'b000000000000010111000000001111100000001100000001100101;
            8'd95:   coef = 54'b000000000000011000000000001111111000001100001001011011;
            8'd96:   coef = 54'b000000000000000110000000001000001000001100010001011110;
            8'd97:   coef = 54'b000000000000000110000000001000001110001100010101100011;
            8'd98:   coef = 54'b000000000000000110000000001000010101001100011001101100;
            8'd99:   coef = 54'b000000000000000111000000001000011100001100011101111001;
            8'd100:   coef = 54'b000000000000000111000000001000100011001100100010001001;
            8'd101:   coef = 54'b000000000000000111000000001000101010001100100110011100;   
            8'd102:   coef = 54'b000000000000000111000000001000110010001100101010110011;
            8'd103:   coef = 54'b000000000000001000000000001000111001001100101111001110;
            8'd104:   coef = 54'b000000000000001000000000001001000001001100110011101101;
            8'd105:   coef = 54'b000000000000001000000000001001001010001100111000010000;
            8'd106:   coef = 54'b000000000000001000000000001001010010001100111100111000;
            8'd107:   coef = 54'b000000000000001001000000001001011011001101000001100011;
            8'd108:   coef = 54'b000000000000001001000000001001100100001101000110010011;
            8'd109:   coef = 54'b000000000000001001000000001001101110001101001011001000;
            8'd110:   coef = 54'b000000000000001010000000001001111000001101010000000010;
            8'd111:   coef = 54'b000000000000001010000000001010000010001101010101000001;
            8'd112:   coef = 54'b000000000000001011000000001010001101001101011010000101;
            8'd113:   coef = 54'b000000000000001011000000001010011000001101011111001110;
            8'd114:   coef = 54'b000000000000001100000000001010100100001101100100011101;
            8'd115:   coef = 54'b000000000000001100000000001010110000001101101001110010;
            8'd116:   coef = 54'b000000000000001101000000001010111100001101101111001110;
            8'd117:   coef = 54'b000000000000001101000000001011001001001101110100101111;
            8'd118:   coef = 54'b000000000000001110000000001011010111001101111010011000;
            8'd119:   coef = 54'b000000000000001111000000001011100110001110000000000111;
            8'd120:   coef = 54'b000000000000001111000000001011110101001110000101111110;
            8'd121:   coef = 54'b000000000000010000000000001100000100001110001011111100;
            8'd122:   coef = 54'b000000000000010001000000001100010101001110010010000011;
            8'd123:   coef = 54'b000000000000010010000000001100100110001110011000010010;
            8'd124:   coef = 54'b000000000000010011000000001100111001001110011110101010;
            8'd125:   coef = 54'b000000000000010100000000001101001100001110100101001011;
            8'd126:   coef = 54'b000000000000010101000000001101100000001110101011110111;
            8'd127:   coef = 54'b000000000000010110000000001101110110001110110010101101;
            8'd128:   coef = 54'b000000000000000101000000000111000110001110111001101101;
            8'd129:   coef = 54'b000000000000000110000000000111001100001110111101010010;
            8'd130:   coef = 54'b000000000000000110000000000111010010001111000000111010;
            8'd131:   coef = 54'b000000000000000110000000000111011001001111000100100101;
            8'd132:   coef = 54'b000000000000000110000000000111011111001111001000010011;
            8'd133:   coef = 54'b000000000000000110000000000111100110001111001100000101;
            8'd134:   coef = 54'b000000000000000111000000000111101101001111001111111010;
            8'd135:   coef = 54'b000000000000000111000000000111110100001111010011110010;
            8'd136:   coef = 54'b000000000000000111000000000111111011001111010111101110;
            8'd137:   coef = 54'b000000000000000111000000001000000011001111011011101110;
            8'd138:   coef = 54'b000000000000001000000000001000001011001111011111110010;
            8'd139:   coef = 54'b000000000000001000000000001000010011001111100011111010;
            8'd140:   coef = 54'b000000000000001000000000001000011100001111101000000110;
            8'd141:   coef = 54'b000000000000001001000000001000100101001111101100010110;   
            8'd142:   coef = 54'b000000000000001001000000001000101110001111110000101011;
            8'd143:   coef = 54'b000000000000001001000000001000111000001111110101000101;
            8'd144:   coef = 54'b000000000000001010000000001001000001001111111001100100;
            8'd145:   coef = 54'b000000000000001010000000001001001100001111111110000111;
            8'd146:   coef = 54'b000000000000001011000000001001010111010000000010110000;
            8'd147:   coef = 54'b000000000000001011000000001001100010010000000111011110;
            8'd148:   coef = 54'b000000000000001100000000001001101101010000001100010010;
            8'd149:   coef = 54'b000000000000001100000000001001111010010000010001001100;
            8'd150:   coef = 54'b000000000000001101000000001010000110010000010110001101;
            8'd151:   coef = 54'b000000000000001101000000001010010100010000011011010100;
            8'd152:   coef = 54'b000000000000001110000000001010100010010000100000100001;
            8'd153:   coef = 54'b000000000000001111000000001010110000010000100101110110;
            8'd154:   coef = 54'b000000000000010000000000001011000000010000101011010010;
            8'd155:   coef = 54'b000000000000010001000000001011010000010000110000110111;
            8'd156:   coef = 54'b000000000000010001000000001011100001010000110110100011;
            8'd157:   coef = 54'b000000000000010010000000001011110011010000111100011000;
            8'd158:   coef = 54'b000000000000010100000000001100000110010001000010010111;
            8'd159:   coef = 54'b000000000000010101000000001100011010010001001000011111;
            8'd160:   coef = 54'b000000000000000101000000000110010111010001001110110010;
            8'd161:   coef = 54'b000000000000000101000000000110011101010001010001111111;
            8'd162:   coef = 54'b000000000000000101000000000110100011010001010101001111;
            8'd163:   coef = 54'b000000000000000110000000000110101001010001011000100010;
            8'd164:   coef = 54'b000000000000000110000000000110101111010001011011111000;
            8'd165:   coef = 54'b000000000000000110000000000110110101010001011111010001;
            8'd166:   coef = 54'b000000000000000110000000000110111011010001100010101110;
            8'd167:   coef = 54'b000000000000000110000000000111000010010001100110001101;
            8'd168:   coef = 54'b000000000000000111000000000111001001010001101001110001;
            8'd169:   coef = 54'b000000000000000111000000000111010000010001101101010111;
            8'd170:   coef = 54'b000000000000000111000000000111011000010001110001000001;
            8'd171:   coef = 54'b000000000000000111000000000111011111010001110100101111;
            8'd172:   coef = 54'b000000000000001000000000000111100111010001111000100001;
            8'd173:   coef = 54'b000000000000001000000000000111110000010001111100010111;
            8'd174:   coef = 54'b000000000000001000000000000111111000010010000000010010;
            8'd175:   coef = 54'b000000000000001001000000001000000001010010000100010000;
            8'd176:   coef = 54'b000000000000001001000000001000001010010010001000010011;
            8'd177:   coef = 54'b000000000000001010000000001000010100010010001100011011;
            8'd178:   coef = 54'b000000000000001010000000001000011110010010010000101000;
            8'd179:   coef = 54'b000000000000001010000000001000101001010010010100111010;
            8'd180:   coef = 54'b000000000000001011000000001000110011010010011001010001;
            8'd181:   coef = 54'b000000000000001011000000001000111111010010011101101110;   
            8'd182:   coef = 54'b000000000000001100000000001001001011010010100010010001;
            8'd183:   coef = 54'b000000000000001101000000001001010111010010100110111001;
            8'd184:   coef = 54'b000000000000001101000000001001100100010010101011101000;
            8'd185:   coef = 54'b000000000000001110000000001001110010010010110000011110;
            8'd186:   coef = 54'b000000000000001111000000001010000000010010110101011011;
            8'd187:   coef = 54'b000000000000001111000000001010010000010010111010011111;
            8'd188:   coef = 54'b000000000000010000000000001010011111010010111111101011;
            8'd189:   coef = 54'b000000000000010001000000001010110000010011000101000000;
            8'd190:   coef = 54'b000000000000010010000000001011000010010011001010011100;
            8'd191:   coef = 54'b000000000000010011000000001011010101010011010000000010;
            8'd192:   coef = 54'b000000000000000101000000000101110100010011010101110010;
            8'd193:   coef = 54'b000000000000000101000000000101111001010011011000101110;
            8'd194:   coef = 54'b000000000000000101000000000101111111010011011011101100;
            8'd195:   coef = 54'b000000000000000101000000000110000100010011011110101101;
            8'd196:   coef = 54'b000000000000000101000000000110001010010011100001110001;
            8'd197:   coef = 54'b000000000000000110000000000110010000010011100100110111;
            8'd198:   coef = 54'b000000000000000110000000000110010110010011101000000001;
            8'd199:   coef = 54'b000000000000000110000000000110011100010011101011001110;
            8'd200:   coef = 54'b000000000000000110000000000110100011010011101110011110;
            8'd201:   coef = 54'b000000000000000110000000000110101001010011110001110001;
            8'd202:   coef = 54'b000000000000000111000000000110110000010011110101001000;
            8'd203:   coef = 54'b000000000000000111000000000110111000010011111000100010;
            8'd204:   coef = 54'b000000000000000111000000000110111111010011111100000000;
            8'd205:   coef = 54'b000000000000001000000000000111000111010011111111100010;
            8'd206:   coef = 54'b000000000000001000000000000111001111010100000011000111;
            8'd207:   coef = 54'b000000000000001000000000000111010111010100000110110001;
            8'd208:   coef = 54'b000000000000001001000000000111100000010100001010011111;
            8'd209:   coef = 54'b000000000000001001000000000111101001010100001110010010;
            8'd210:   coef = 54'b000000000000001001000000000111110010010100010010001001;
            8'd211:   coef = 54'b000000000000001010000000000111111100010100010110000101;
            8'd212:   coef = 54'b000000000000001010000000001000000111010100011010000110;
            8'd213:   coef = 54'b000000000000001011000000001000010001010100011110001100;
            8'd214:   coef = 54'b000000000000001011000000001000011100010100100010011000;
            8'd215:   coef = 54'b000000000000001100000000001000101000010100100110101001;
            8'd216:   coef = 54'b000000000000001100000000001000110101010100101011000001;
            8'd217:   coef = 54'b000000000000001101000000001001000001010100101111011110;
            8'd218:   coef = 54'b000000000000001110000000001001001111010100110100000011;
            8'd219:   coef = 54'b000000000000001111000000001001011101010100111000101110;
            8'd220:   coef = 54'b000000000000001111000000001001101100010100111101100001;
            8'd221:   coef = 54'b000000000000010000000000001001111100010101000010011011;   
            8'd222:   coef = 54'b000000000000010001000000001010001101010101000111011101;
            8'd223:   coef = 54'b000000000000010010000000001010011110010101001100101000;
            8'd224:   coef = 54'b000000000000000100000000000101011000010101010001111101;
            8'd225:   coef = 54'b000000000000000101000000000101011101010101010100101010;
            8'd226:   coef = 54'b000000000000000101000000000101100010010101010111011010;
            8'd227:   coef = 54'b000000000000000101000000000101101000010101011010001101;
            8'd228:   coef = 54'b000000000000000101000000000101101101010101011101000010;
            8'd229:   coef = 54'b000000000000000101000000000101110010010101011111111011;
            8'd230:   coef = 54'b000000000000000101000000000101111000010101100010110101;
            8'd231:   coef = 54'b000000000000000110000000000101111110010101100101110011;
            8'd232:   coef = 54'b000000000000000110000000000110000100010101101000110100;
            8'd233:   coef = 54'b000000000000000110000000000110001011010101101011111000;
            8'd234:   coef = 54'b000000000000000110000000000110010001010101101110111111;
            8'd235:   coef = 54'b000000000000000111000000000110011000010101110010001010;
            8'd236:   coef = 54'b000000000000000111000000000110011111010101110101011000;
            8'd237:   coef = 54'b000000000000000111000000000110100110010101111000101010;
            8'd238:   coef = 54'b000000000000000111000000000110101110010101111011111111;
            8'd239:   coef = 54'b000000000000001000000000000110110110010101111111011000;
            8'd240:   coef = 54'b000000000000001000000000000110111110010110000010110101;
            8'd241:   coef = 54'b000000000000001000000000000111000111010110000110010111;
            8'd242:   coef = 54'b000000000000001001000000000111010000010110001001111101;
            8'd243:   coef = 54'b000000000000001001000000000111011001010110001101100111;
            8'd244:   coef = 54'b000000000000001010000000000111100011010110010001010110;
            8'd245:   coef = 54'b000000000000001010000000000111101101010110010101001010;
            8'd246:   coef = 54'b000000000000001011000000000111110111010110011001000011;
            8'd247:   coef = 54'b000000000000001011000000001000000010010110011101000010;
            8'd248:   coef = 54'b000000000000001100000000001000001110010110100001000110;
            8'd249:   coef = 54'b000000000000001100000000001000011010010110100101010001;
            8'd250:   coef = 54'b000000000000001101000000001000100111010110101001100001;
            8'd251:   coef = 54'b000000000000001110000000001000110101010110101101111000;
            8'd252:   coef = 54'b000000000000001110000000001001000011010110110010010111;
            8'd253:   coef = 54'b000000000000001111000000001001010010010110110110111100;
            8'd254:   coef = 54'b000000000000010000000000001001100010010110111011101001;
            8'd255:   coef = 54'b000000000000010001000000001001110010010111000000011110;
        endcase
    end
endmodule    

module delay_one_bit(
    input wire clk,
    input wire in,
    output reg out
    );
    always @(posedge clk) begin
        out <= in;
   end
endmodule 


module offset_delay(
    input wire clk,
    input wire [4:0] offset_in,
    output reg [4:0] offset_out
    );  
    always @(posedge clk) begin
        offset_out <= offset_in;
    end
endmodule